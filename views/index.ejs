<!DOCTYPE html>
<html>
  <head>
    <title>API Basejump: File Metadata microservice </title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1>API Basejump: File Metadata microservice </h1>

    <h2>User Stories</h2>

    <ul>
	    <li>
	    	I can submit a FormData object that includes a file upload.
	    </li>

		<li>
			When I submit something, I will receive the file size in bytes within the JSON response
		</li>
    </ul>


    <div class="container">

    <div class="row">

    	<div class="col-md-4">



<form id="myForm" action="/api/upload" method="post" enctype="multipart/form-data">
     <input type="file" size="60" name="file"><br/><br/>
     <input type="submit" value="Upload">
 </form>
 
 <div id="progress">
        <div id="bar"></div>
        <div id="percent">0%</div >
</div>
<br/>
 
<div id="message"></div>





    	</div>

    </div>



    </div>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script src="http://malsup.github.com/jquery.form.js"></script>


	<script type="text/javascript">
		
		$(document).ready(function(){
 
		    var options = { 
		    beforeSend: function() 
		    {
		        $("#progress").show();
		        //clear everything
		        $("#bar").width('0%');
		        $("#message").html("");
		        $("#percent").html("0%");
		    },
		    uploadProgress: function(event, position, total, percentComplete) 
		    {
		        $("#bar").width(percentComplete+'%');
		        $("#percent").html(percentComplete+'%');
		 
		    },
		    success: function() 
		    {
		        $("#bar").width('100%');
		        $("#percent").html('100%');
		 
		    },
		    complete: function(response) 
		    {
		        $("#message").html("<font color='green'>"+response.responseText+"</font>");
		    },
		    error: function()
		    {
		        $("#message").html("<font color='red'> ERROR: unable to upload files</font>");
		 
		    }
		 
			}; 
		 
		     $("#myForm").ajaxForm(options);
 
		});

	</script>

  </body>
</html>
